define(["@grafana/data","@grafana/runtime","rxjs","react","lodash","@grafana/ui"],((e,t,r,n,a,o)=>(()=>{"use strict";var i={305:t=>{t.exports=e},545:e=>{e.exports=t},388:e=>{e.exports=o},980:e=>{e.exports=a},650:e=>{e.exports=n},177:e=>{e.exports=r}},l={};function u(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={exports:{}};return i[e](r,r.exports,u),r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{u.r(c),u.d(c,{plugin:()=>ge});var e=u(305),t=u(545),r=u(177);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.apply(r,[].concat(a,n))}}}function d(e){return{}.toString.call(e).includes("Object")}function m(e){return"function"==typeof e}var T=p((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),O=function(e,t){return d(t)||T("changeType"),Object.keys(t).some((function(t){return r=e,n=t,!Object.prototype.hasOwnProperty.call(r,n);var r,n}))&&T("changeField"),t},S=function(e){m(e)||T("selectorType")},f=function(e){m(e)||d(e)||T("handlerType"),d(e)&&Object.values(e).some((function(e){return!m(e)}))&&T("handlersType")},P=function(e){var t;e||T("initialIsRequired"),d(e)||T("initialType"),t=e,Object.keys(t).length||T("initialContent")};function C(e,t){return m(t)?t(e.current):t}function R(e,t){return e.current=E(E({},e.current),t),t}function N(e,t,r){return m(t)?t(e.current):Object.keys(r).forEach((function(r){var n;return null===(n=t[r])||void 0===n?void 0:n.call(t,e.current[r])})),r}const A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(e),f(t);var r={current:e},n=p(N)(r,t),a=p(R)(r),o=p(O)(e),i=p(C)(r);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return S(e),e(r.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(n,a,o,i)(e)}]};var g,I={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},b=(g=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return n.length>=g.length?g.apply(this,n):function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e.apply(t,[].concat(n,a))}})(I);const L={config:function(e){return e||b("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||b("configType"),e.urls?(console.warn(I.deprecation),{paths:{vs:e.urls.monacoBase}}):e;var t}},h=function e(t,r){return Object.keys(r).forEach((function(n){r[n]instanceof Object&&t[n]&&Object.assign(r[n],e(t[n],r[n]))})),o(o({},t),r)};var D={type:"cancelation",msg:"operation is manually canceled"};const M=function(e){var t=!1,r=new Promise((function(r,n){e.then((function(e){return t?n(D):r(e)})),e.catch(n)}));return r.cancel=function(){return t=!0},r};var y,v=(2,function(e){if(Array.isArray(e))return e}(y=A({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),2!==r.length);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}}(y)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,2):void 0}}(y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),F=v[0],U=v[1];function H(e){return document.body.appendChild(e)}function w(e){var t,r,n=F((function(e){return{config:e.config,reject:e.reject}})),a=(t="".concat(n.config.paths.vs,"/loader.js"),r=document.createElement("script"),t&&(r.src=t),r);return a.onload=function(){return e()},a.onerror=n.reject,a}function G(){var e=F((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){j(t),e.resolve(t)}),(function(t){e.reject(t)}))}function j(e){F().monaco||U({monaco:e})}var B=new Promise((function(e,t){return U({resolve:e,reject:t})})),x={config:function(e){var t=L.config(e),r=t.monaco,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,["monaco"]);U((function(e){return{config:h(e.config,n),monaco:r}}))},init:function(){var e=F((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(U({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),M(B);if(window.monaco&&window.monaco.editor)return j(window.monaco),e.resolve(window.monaco),M(B);!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(H,w)(G)}return M(B)},__getMonacoInstance:function(){return F((function(e){return e.monaco}))}};const k=x;var K=u(650),V=u.n(K),W={display:"flex",position:"relative",textAlign:"initial"},X={width:"100%"},Y={display:"none"},z={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},q=function({children:e}){return K.createElement("div",{style:z.container},e)},Z=(0,K.memo)((function({width:e,height:t,isEditorReady:r,loading:n,_ref:a,className:o,wrapperProps:i}){return K.createElement("section",{style:{...W,width:e,height:t},...i},!r&&K.createElement(q,null,n),K.createElement("div",{ref:a,style:{...X,...!r&&Y},className:o}))})),$=function(e){(0,K.useEffect)(e,[])},_=function(e,t,r=!0){let n=(0,K.useRef)(!0);(0,K.useEffect)(n.current||!r?()=>{n.current=!1}:e,t)};function J(){}function Q(e,t,r,n){return function(e,t){return e.editor.getModel(ee(e,t))}(e,n)||function(e,t,r,n){return e.editor.createModel(t,r,n?ee(e,n):void 0)}(e,t,r,n)}function ee(e,t){return e.Uri.parse(t)}(0,K.memo)((function({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:u=!1,theme:c="light",loading:s="Loading...",options:E={},height:p="100%",width:d="100%",className:m,wrapperProps:T={},beforeMount:O=J,onMount:S=J}){let[f,P]=(0,K.useState)(!1),[C,R]=(0,K.useState)(!0),N=(0,K.useRef)(null),A=(0,K.useRef)(null),g=(0,K.useRef)(null),I=(0,K.useRef)(S),b=(0,K.useRef)(O),L=(0,K.useRef)(!1);$((()=>{let e=k.init();return e.then((e=>(A.current=e)&&R(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>N.current?function(){let e=N.current?.getModel();l||e?.original?.dispose(),u||e?.modified?.dispose(),N.current?.dispose()}():e.cancel()})),_((()=>{let e=N.current.getModifiedEditor();e.getOption(A.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())}),[t],f),_((()=>{N.current?.getModel()?.original.setValue(e||"")}),[e],f),_((()=>{let{original:e,modified:t}=N.current.getModel();A.current.editor.setModelLanguage(e,n||r||"text"),A.current.editor.setModelLanguage(t,a||r||"text")}),[r,n,a],f),_((()=>{A.current?.editor.setTheme(c)}),[c],f),_((()=>{N.current?.updateOptions(E)}),[E],f);let h=(0,K.useCallback)((()=>{if(!A.current)return;b.current(A.current);let l=Q(A.current,e||"",n||r||"text",o||""),u=Q(A.current,t||"",a||r||"text",i||"");N.current?.setModel({original:l,modified:u})}),[r,t,a,e,n,o,i]),D=(0,K.useCallback)((()=>{!L.current&&g.current&&(N.current=A.current.editor.createDiffEditor(g.current,{automaticLayout:!0,...E}),h(),A.current?.editor.setTheme(c),P(!0),L.current=!0)}),[E,c,h]);return(0,K.useEffect)((()=>{f&&I.current(N.current,A.current)}),[f]),(0,K.useEffect)((()=>{!C&&!f&&D()}),[C,f,D]),_((()=>{if(N.current&&A.current){let t=N.current.getOriginalEditor(),a=Q(A.current,e||"",n||r||"text",o||"");a!==t.getModel()&&t.setModel(a)}}),[o],f),_((()=>{if(N.current&&A.current){let e=N.current.getModifiedEditor(),n=Q(A.current,t||"",a||r||"text",i||"");n!==e.getModel()&&e.setModel(n)}}),[i],f),K.createElement(Z,{width:d,height:p,isEditorReady:f,loading:s,_ref:g,className:m,wrapperProps:T})}));var te=new Map,re=(0,K.memo)((function({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:a,path:o,theme:i="light",line:l,loading:u="Loading...",options:c={},overrideServices:s={},saveViewState:E=!0,keepCurrentModel:p=!1,width:d="100%",height:m="100%",className:T,wrapperProps:O={},beforeMount:S=J,onMount:f=J,onChange:P,onValidate:C=J}){let[R,N]=(0,K.useState)(!1),[A,g]=(0,K.useState)(!0),I=(0,K.useRef)(null),b=(0,K.useRef)(null),L=(0,K.useRef)(null),h=(0,K.useRef)(f),D=(0,K.useRef)(S),M=(0,K.useRef)(),y=(0,K.useRef)(n),v=function(e){let t=(0,K.useRef)();return(0,K.useEffect)((()=>{t.current=e}),[e]),t.current}(o),F=(0,K.useRef)(!1),U=(0,K.useRef)(!1);$((()=>{let e=k.init();return e.then((e=>(I.current=e)&&g(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>b.current?(M.current?.dispose(),p?E&&te.set(o,b.current.saveViewState()):b.current.getModel()?.dispose(),void b.current.dispose()):e.cancel()})),_((()=>{let i=Q(I.current,e||n||"",t||a||"",o||r||"");i!==b.current?.getModel()&&(E&&te.set(v,b.current?.saveViewState()),b.current?.setModel(i),E&&b.current?.restoreViewState(te.get(o)))}),[o],R),_((()=>{b.current?.updateOptions(c)}),[c],R),_((()=>{!b.current||void 0===n||(b.current.getOption(I.current.editor.EditorOption.readOnly)?b.current.setValue(n):n!==b.current.getValue()&&(U.current=!0,b.current.executeEdits("",[{range:b.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),b.current.pushUndoStop(),U.current=!1))}),[n],R),_((()=>{let e=b.current?.getModel();e&&a&&I.current?.editor.setModelLanguage(e,a)}),[a],R),_((()=>{void 0!==l&&b.current?.revealLine(l)}),[l],R),_((()=>{I.current?.editor.setTheme(i)}),[i],R);let H=(0,K.useCallback)((()=>{if(L.current&&I.current&&!F.current){D.current(I.current);let l=o||r,u=Q(I.current,n||e||"",t||a||"",l||"");b.current=I.current?.editor.create(L.current,{model:u,automaticLayout:!0,...c},s),E&&b.current.restoreViewState(te.get(l)),I.current.editor.setTheme(i),N(!0),F.current=!0}}),[e,t,r,n,a,o,c,s,E,i]);return(0,K.useEffect)((()=>{R&&h.current(b.current,I.current)}),[R]),(0,K.useEffect)((()=>{!A&&!R&&H()}),[A,R,H]),y.current=n,(0,K.useEffect)((()=>{R&&P&&(M.current?.dispose(),M.current=b.current?.onDidChangeModelContent((e=>{U.current||P(b.current.getValue(),e)})))}),[R,P]),(0,K.useEffect)((()=>{if(R){let e=I.current.editor.onDidChangeMarkers((e=>{let t=b.current.getModel()?.uri;if(t&&e.find((e=>e.path===t.path))){let e=I.current.editor.getModelMarkers({resource:t});C?.(e)}}));return()=>{e?.dispose()}}return()=>{}}),[R,C]),K.createElement(Z,{width:d,height:m,isEditorReady:R,loading:u,_ref:L,className:T,wrapperProps:O})}));const ne=["!","!=","%","&","&&","(","()",")","*","**","+","+!","-","->B58","->B58C","->B64","->B64URL","->BIN","->BYTES","->DOUBLEBITS","->ENCODER","->ENCODERS","->FLOATBITS","->GEOCELL","->GEOHASH","->GEOJSON","->GEOSHAPE","->GML","->GTS","->GTSHHCODE","->GTSHHCODELONG","->HEX","->HHCODE","->HHCODELONG","->JSON","->KML","->LIST","->LONGBYTES","->MACRO","->MAP","->MAT","->MVSTRING","->OPB64","->PICKLE","->Q","->RLP","->SET","->SSSS","->TSELEMENTS","->V","->VARINT","->VEC","->WKB","->WKT","->Z","/","<","<<","<=","==",">",">=",">>",">>>","ABI->","ABI.SIG","ABS","ACCEL.CACHE","ACCEL.NOCACHE","ACCEL.NOPERSIST","ACCEL.PERSIST","ACCEL.REPORT","ACOS","ADDDAYS","ADDDURATION","ADDEXACT","ADDMONTHS","ADDVALUE","ADDYEARS","AESUNWRAP","AESWRAP","AGO","AND","APPEND","APPLY","ASENCODERS","ASIN","ASREGS","ASSERT","ASSERTMSG","ATAN","ATAN2","ATBUCKET","ATINDEX","ATTICK","ATTRIBUTES","AUTHENTICATE","B58->","B58C->","B64->","B64TOHEX","B64URL->","BBOX","BIN->","BINTOHEX","BITCOUNT","BITGET","BITSTOBYTES","BOOTSTRAP","BREAK","BUCKETCOUNT","BUCKETIZE","BUCKETIZE.CALENDAR","BUCKETSPAN","BYTES->","BYTESTOBITS","CALL","CAPADD","CAPCHECK","CAPDEL","CAPGET","CBRT","CEIL","CELL->","CELLCF","CELLCQ","CELLROW","CELLTAGS","CELLTS","CELLVALUE","CEVAL","CHECKMACRO","CHECKSHAPE","CHRONOEND","CHRONOSTART","CHRONOSTATS","CHUNK","CHUNKENCODER","CLEAR","CLEARDEFS","CLEARREGS","CLEARSYMBOLS","CLEARTOMARK","CLIP","CLONE","CLONEEMPTY","CLONEREVERSE","COMMONTICKS","COMPACT","CONTAINS","CONTAINSKEY","CONTAINSVALUE","CONTINUE","COPYGEO","COPYSIGN","CORRELATE","COS","COSH","COUNTER","COUNTERDELTA","COUNTERSET","COUNTERVALUE","COUNTTOMARK","CPOPR","CPROB","CROP","CSTORE","DEBUGOFF","DEBUGON","DECREMENTEXACT","DEDUP","DEF","DEFINED","DEFINEDMACRO","DEFLATE","DELETE","DELETEOFF","DELETEON","DEPTH","DEREF","DET","DIFFERENCE","DISCORDS","DOC","DOCMODE","DOUBLEBITS->","DOUBLEEXPONENTIALSMOOTHING","DROP","DROPN","DTW","DUP","DUPN","DURATION","DWTSPLIT","E","ECDH","ECGEN","ECHOOFF","ECHOON","ECPRIVATE","ECPUBLIC","ECRECOVER","ECSIGN","ECVERIFY","EIP712.HASH","ELAPSED","ELEVATIONS","EMPTY","ENCODER->","ERROR","ESDTEST","ETH.BIP32","ETH.BIP39","ETH.CALL","ETH.KEY","ETH.LOG","ETH.NONCE","ETH.RECEIPT","ETH.RETURN","ETH.TXN","ETH.VERIFY","EVALSECURE","EVERY","EXP","EXPM1","EXPORT","EXTLOADED","F","FDWT","FETCH","FETCHBOOLEAN","FETCHDOUBLE","FETCHLONG","FETCHSTRING","FFT","FFTAP","FFTWINDOW","FILL","FILLNEXT","FILLPREVIOUS","FILLTICKS","FILLVALUE","FILTER","FILTERBY","FIND","FINDSETS","FINDSTATS","FIRSTTICK","FLATTEN","FLOAD","FLOATBITS->","FLOOR","FLOORDIV","FLOORMOD","FORGET","FREAD","FROMBIN","FROMBITS","FROMHEX","FSTORE","FUNCREF","FUNCTIONS","FUSE","GEO.BUFFER","GEO.COVER","GEO.COVER.RL","GEO.DIFFERENCE","GEO.GML","GEO.GML.UNIFORM","GEO.INTERSECTION","GEO.INTERSECTS","GEO.JSON","GEO.JSON.UNIFORM","GEO.KML","GEO.KML.UNIFORM","GEO.NORMALIZE","GEO.OPTIMIZE","GEO.REGEXP","GEO.UNION","GEO.WITHIN","GEO.WKB","GEO.WKB.UNIFORM","GEO.WKT","GEO.WKT.UNIFORM","GEOCELL->","GEOHASH->","GEOPACK","GEOSHAPE->","GEOSHIFT","GEOSPLIT","GEOUNPACK","GET","GETEXPONENT","GETHOOK","GETSECTION","GITFIND","GITLOAD","GITLOG","GITRM","GITSTORE","GITTAG","GOLDWRAP","GOST","GROUPBY","GRUBBSTEST","GTSHHCODE->","GUARD","GZIP","HASH","HAVERSINE","HEADER","HEX->","HEXTOB64","HEXTOBIN","HFCAT","HFCLOSE","HFDUMP","HFFETCH","HFID","HFINDEX","HFINFO","HFKEYS","HFOPEN","HFRESCAN","HFTOKEN","HHCODE->","HHCODE.BBOX","HHCODE.CENTER","HHCODE.EAST","HHCODE.NORTH","HHCODE.NORTH.EAST","HHCODE.NORTH.WEST","HHCODE.SOUTH","HHCODE.SOUTH.EAST","HHCODE.SOUTH.WEST","HHCODE.WEST","HIDE","HLOCATE","HTTP","HULLSHAPE","HUMANDURATION","HYBRIDTEST","HYBRIDTEST2","HYPOT","IDENT","IDWT","IEEEREMAINDER","IFFT","IMMUTABLE","IMPORT","INCREMENTEXACT","INDEXOF","INFLATE","INFO","INFOMODE","INTEGRATE","INTERPOLATE","INTERSECTION","INV","ISAUTHENTICATED","ISNULL","ISNaN","ISO8601","ISODURATION","ISONORMALIZE","JOIN","JSON->","JSONCOMPACT","JSONLOOSE","JSONPRETTY","JSONSTACK","JSONSTRICT","KECCAK.128","KECCAK.224","KECCAK.256","KECCAK.288","KECCAK.384","KECCAK.512","KEYLIST","KURTOSIS","LABELS","LASTACTIVITY","LASTBUCKET","LASTSORT","LASTTICK","LBOUNDS","LEVELDBCLOSE","LEVELDBOPEN","LEVELDBSECRET","LEVELDBSNAPSHOT","LEVELDBSNAPSHOTINC","LFILTER","LFLATMAP","LIMIT","LINEOFF","LINEON","LIST->","LMAP","LOAD","LOCATIONOFFSET","LOCATIONS","LOCSTRINGS","LOG","LOG10","LOG1P","LOGEVENT->","LOGMSG","LOWESS","LR","LSORT","LTTB","MACRO->","MACROBUCKETIZER","MACROCONFIG","MACROCONFIGDEFAULT","MACROCONFIGSECRET","MACROFILLER","MACROTTL","MAKEGTS","MAN","MAP","MAP->","MAPID","MARK","MAT->","MATCH","MATCHER","MAX","MAXBUCKETS","MAXDEPTH","MAXGEOCELLS","MAXGTS","MAXJSON","MAXLONG","MAXLOOP","MAXOPS","MAXPIXELS","MAXRECURSION","MAXSYMBOLS","MAXURLFETCHCOUNT","MAXURLFETCHSIZE","MCHECKSIG","MD2","MD4","MD5","MDETACH","MERGE","META","METADIFF","METAOFF","METAON","METASET","METASORT","MFILTER","MIN","MINLONG","MINREV","MMAP","MODE","MONOTONIC","MOTIONSPLIT","MRSEC","MSEC","MSIG","MSIGCOUNT","MSIGINFO","MSIGN","MSORT","MSTU","MULTIPLYEXACT","MUSIGMA","MUTEX","MVELEVATIONS","MVERIFY","MVHHCODES","MVINDEXSPLIT","MVLOCATIONS","MVTICKS","MVTICKSPLIT","MVVALUES","NAME","NBOUNDS","NDEBUGON","NEGATEEXACT","NEWENCODER","NEWGTS","NEXTAFTER","NEXTDOWN","NEXTUP","NOLOG","NONEMPTY","NONNULL","NOOP","NORMALIZE","NOT","NOTAFTER","NOTBEFORE","NOTIMINGS","NOW","NPDF","NPEEK","NSUMSUMSQ","ONLYBUCKETS","OPB64->","OPB64TOHEX","OPS","OPTDTW","OPTIMIZE","OR","PACK","PAPPLY","PARSE","PARSESELECTOR","PARSEVALUE","PARTITION","PATTERNDETECTION","PATTERNS","PEEK","PEEKN","PERMUTE","PFILTER","PGPDECRYPT","PGPENCRYPT","PGPINFO","PGPPRIVATE","PGPPUBLIC","PGPRING","PGPSIGN","PGPVERIFY","PGraphics","PI","PICK","PICKLE->","PIGSCHEMA","PIVOT","PIVOTSTRICT","POLYFIT","POLYFUNC","POPR","PREDUCE","PRNG","PROB","PROBABILITY","PSTACK","PUSHR","PUT","Palpha","Parc","Pbackground","PbeginContour","PbeginShape","Pbezier","PbezierDetail","PbezierPoint","PbezierTangent","PbezierVertex","Pblend","PblendMode","Pblue","Pbox","Pbrightness","Pclear","Pclip","Pcolor","PcolorMode","Pconstrain","Pcopy","PcreateFont","Pcurve","PcurveDetail","PcurvePoint","PcurveTangent","PcurveTightness","PcurveVertex","Pdecode","Pdist","Pellipse","PellipseMode","Pencode","PendContour","PendShape","Pfill","Pfilter","Pget","Pgreen","Phue","Pimage","PimageMode","Plerp","PlerpColor","Pline","PloadShape","Pmag","Pmap","Pmask","PnoClip","PnoFill","PnoStroke","PnoTint","Pnorm","Ppixels","Ppoint","PpopMatrix","PpopStyle","PpushMatrix","PpushStyle","Pquad","PquadraticVertex","Prect","PrectMode","Pred","PresetMatrix","Presize","Protate","Psaturation","Pscale","Pset","Pshape","PshapeMode","PshearX","PshearY","Psize","Psphere","PsphereDetail","Pstroke","PstrokeCap","PstrokeJoin","PstrokeWeight","Ptext","PtextAlign","PtextAscent","PtextDescent","PtextFont","PtextLeading","PtextMode","PtextSize","PtextWidth","Ptint","PtoImage","Ptranslate","Ptriangle","PupdatePixels","Pvertex","Q->","QCONJUGATE","QDIVIDE","QMULTIPLY","QROTATE","QROTATION","QUANTIZE","RAND","RANDOM","RANDPDF","RANGE","RANGECOMPACT","RAWDTW","REDEFS","REDUCE","RELABEL","REMOVE","REMOVETICK","RENAME","REOPTALT","REPLACE","REPLACEALL","REPORT","RESET","RESETS","RESHAPE","RESTORE","REV","REVBITS","REVERSE","REXEC","REXECZ","RINT","RIPEMD128","RIPEMD160","RIPEMD256","RIPEMD320","RLOWESS","RLP->","ROLL","ROLLD","ROT","ROTATIONQ","ROUND","RSADECRYPT","RSAENCRYPT","RSAGEN","RSAPRIVATE","RSAPUBLIC","RSASIGN","RSAVERIFY","RSORT","RTFM","RUN","RUNNERAT","RUNNERIN","RUNNERNONCE","RUNR","RVALUESORT","SAVE","SCALB","SECTION","SECURE","SECUREKEY","SENSISION.DUMP","SENSISION.DUMPEVENTS","SENSISION.EVENT","SENSISION.GET","SENSISION.SET","SENSISION.UPDATE","SET","SET->","SETATTRIBUTES","SETMACROCONFIG","SETVALUE","SHA1","SHA1HMAC","SHA224","SHA256","SHA256HMAC","SHA3.224","SHA3.256","SHA3.384","SHA3.512","SHA384","SHA512","SHAPE","SHMDEFINED","SHMLOAD","SHMSTORE","SHOW","SHRINK","SHUFFLE","SIGNUM","SIN","SINGLEEXPONENTIALSMOOTHING","SINH","SIZE","SKEWNESS","SMARTPARSE","SNAPSHOT","SNAPSHOTALL","SNAPSHOTALLTOMARK","SNAPSHOTCOPY","SNAPSHOTCOPYALL","SNAPSHOTCOPYALLTOMARK","SNAPSHOTCOPYN","SNAPSHOTCOPYTOMARK","SNAPSHOTN","SNAPSHOTREADABLE","SNAPSHOTTOMARK","SORT","SORTBY","SORTWITH","SPLIT","SQRT","SRAND","SRANDPDF","SSSS->","SSTFIND","SSTINFO","SSTPURGE","SSTREPORT","SSTTIMESTAMP","STACKATTRIBUTE","STACKPSSECRET","STACKTOLIST","STANDARDIZE","STDERR","STDIN","STDOUT","STL","STLESDTEST","STOP","STORE","STRICTPARTITION","STRINGFORMAT","STU","SUBLIST","SUBMAP","SUBSTRING","SUBTRACTEXACT","SWAP","SYMBOLS","SYNC","T","TAN","TANH","TDESCRIBE","TEMPLATE","THRESHOLDTEST","TICKINDEX","TICKLIST","TICKS","TIGER","TIMEBOX","TIMECLIP","TIMED","TIMEMODULO","TIMEOFF","TIMEON","TIMESCALE","TIMESHIFT","TIMESPLIT","TIMINGS","TLTTB","TOBIN","TOBITS","TOBOOLEAN","TODEGREES","TODOUBLE","TOHEX","TOINTEXACT","TOKENDUMP","TOKENGEN","TOKENINFO","TOKENSECRET","TOLONG","TOLOWER","TORADIANS","TOSELECTOR","TOSTRING","TOTIMESTAMP","TOUPPER","TR","TRANSPOSE","TRIM","TSELEMENTS","TSELEMENTS->","TYPEOF","ULP","UNBUCKETIZE","UNBUCKETIZE.CALENDAR","UNGZIP","UNION","UNIQUE","UNLIST","UNMAP","UNPACK","UNSECURE","UNSET","UNWRAP","UNWRAPEMPTY","UNWRAPENCODER","UNWRAPSIZE","UPDATE","UPDATEOFF","UPDATEON","URLDECODE","URLENCODE","URLFETCH","UUID","V->","VALUEDEDUP","VALUEHISTOGRAM","VALUELIST","VALUES","VALUESORT","VALUESPLIT","VARINT->","VARS","VEC->","WEBCALL","WF.ADDREPO","WF.GETREPOS","WF.SETREPOS","WFOFF","WFON","WHIRLPOOL","WRAP","WRAPFAST","WRAPMV","WRAPMV!","WRAPOPT","WRAPRAW","WRAPRAWOPT","WSINFO","WSKILL","WSKILLSESSION","WSNAME","WSPS","WSSESSION","WSSTACK","WSSTOP","WSSTOPSESSION","Z->","ZDISCORDS","ZDTW","ZIP","ZPATTERNDETECTION","ZPATTERNS","ZSCORE","ZSCORETEST","[","[[","[[]]","[]","]","]]","^","babbage","bucketizer.and","bucketizer.or","buterin","d","e","eth","ether","filler.interpolate","filler.next","filler.previous","filler.trend","filter.latencies","finney","gwei","h","kwei","lovelace","m","mapper.and","mapper.finite","mapper.geo.approximate","mapper.geo.clear","mapper.geo.fence","mapper.geo.outside","mapper.geo.within","mapper.hdist","mapper.median","mapper.median.forbid-nulls","mapper.mod","mapper.npdf","mapper.or","mapper.percentile","mapper.percentile.forbid-nulls","mapper.truecourse","max.tick.sliding.window","max.time.sliding.window","ms","mwei","ns","op.add","op.add.ignore-nulls","op.and","op.and.ignore-nulls","op.div","op.eq","op.ge","op.gt","op.le","op.lt","op.mask","op.mul","op.mul.ignore-nulls","op.ne","op.negmask","op.or","op.or.ignore-nulls","op.sub","pi","ps","pwei","reducer.and","reducer.and.exclude-nulls","s","shannon","szabo","twei","us","w","wei","{","{}","|","||","}","~","~="],ae=["E","F","MAXLONG","MINLONG","NULL","NaN","PI","T","e","pi"],oe=["BUCKETIZE","BUCKETIZE.CALENDAR","FILTER","MACROBUCKETIZER","MACROFILTER","MACROMAPPER","MACROREDUCER","MAP","METAMATCH","PFILTER","PREDUCE","REDUCE","STRICTMAPPER","STRICTREDUCER","UNBUCKETIZE.CALENDAR","bucketizer.and","bucketizer.count","bucketizer.count.exclude-nulls","bucketizer.count.include-nulls","bucketizer.count.nonnull","bucketizer.first","bucketizer.join","bucketizer.join.forbid-nulls","bucketizer.last","bucketizer.mad","bucketizer.max","bucketizer.max.forbid-nulls","bucketizer.mean","bucketizer.mean.circular","bucketizer.mean.circular.exclude-nulls","bucketizer.mean.exclude-nulls","bucketizer.median","bucketizer.median.forbid-nulls","bucketizer.min","bucketizer.min.forbid-nulls","bucketizer.or","bucketizer.percentile","bucketizer.percentile.forbid-nulls","bucketizer.rms","bucketizer.sd","bucketizer.sd.forbid-nulls","bucketizer.sd.welford","bucketizer.sum","bucketizer.sum.forbid-nulls","bucketizer.var","bucketizer.var.welford","filter.all.eq","filter.all.ge","filter.all.gt","filter.all.le","filter.all.lt","filter.all.ne","filter.any.eq","filter.any.ge","filter.any.gt","filter.any.le","filter.any.lt","filter.any.ne","filter.byattr","filter.byclass","filter.bylabels","filter.bylabelsattr","filter.bymetadata","filter.byselector","filter.bysize","filter.last.eq","filter.last.ge","filter.last.gt","filter.last.le","filter.last.lt","filter.last.ne","filter.latencies","mapper.abs","mapper.add","mapper.and","mapper.ceil","mapper.count","mapper.count.exclude-nulls","mapper.count.include-nulls","mapper.count.nonnull","mapper.day","mapper.delta","mapper.dotproduct","mapper.dotproduct.positive","mapper.dotproduct.sigmoid","mapper.dotproduct.tanh","mapper.eq","mapper.eq.elev","mapper.eq.hhcode","mapper.eq.lat","mapper.eq.lon","mapper.eq.tick","mapper.exp","mapper.finite","mapper.first","mapper.floor","mapper.ge","mapper.ge.elev","mapper.ge.hhcode","mapper.ge.lat","mapper.ge.lon","mapper.ge.tick","mapper.geo.approximate","mapper.geo.clear","mapper.geo.fence","mapper.geo.outside","mapper.geo.within","mapper.gt","mapper.gt.elev","mapper.gt.hhcode","mapper.gt.lat","mapper.gt.lon","mapper.gt.tick","mapper.hdist","mapper.highest","mapper.hour","mapper.hspeed","mapper.join","mapper.join.forbid-nulls","mapper.kernel.cosine","mapper.kernel.epanechnikov","mapper.kernel.gaussian","mapper.kernel.logistic","mapper.kernel.quartic","mapper.kernel.silverman","mapper.kernel.triangular","mapper.kernel.tricube","mapper.kernel.triweight","mapper.kernel.uniform","mapper.last","mapper.le","mapper.le.elev","mapper.le.hhcode","mapper.le.lat","mapper.le.lon","mapper.le.tick","mapper.log","mapper.lowest","mapper.lt","mapper.lt.elev","mapper.lt.hhcode","mapper.lt.lat","mapper.lt.lon","mapper.lt.tick","mapper.mad","mapper.max","mapper.max.forbid-nulls","mapper.max.x","mapper.mean","mapper.mean.circular","mapper.mean.circular.exclude-nulls","mapper.mean.exclude-nulls","mapper.median","mapper.median.forbid-nulls","mapper.min","mapper.min.forbid-nulls","mapper.min.x","mapper.minute","mapper.mod","mapper.month","mapper.mul","mapper.ne","mapper.ne.elev","mapper.ne.hhcode","mapper.ne.lat","mapper.ne.lon","mapper.ne.tick","mapper.npdf","mapper.or","mapper.parsedouble","mapper.percentile","mapper.percentile.forbid-nulls","mapper.pow","mapper.product","mapper.rate","mapper.replace","mapper.rms","mapper.round","mapper.sd","mapper.sd.forbid-nulls","mapper.sd.welford","mapper.second","mapper.sigmoid","mapper.sqrt","mapper.sum","mapper.sum.forbid-nulls","mapper.tanh","mapper.tick","mapper.toboolean","mapper.todouble","mapper.tolong","mapper.tostring","mapper.truecourse","mapper.var","mapper.var.forbid-nulls","mapper.var.welford","mapper.vdist","mapper.vspeed","mapper.weekday","mapper.year","max.tick.sliding.window","max.time.sliding.window","reducer.and","reducer.and.exclude-nulls","reducer.argmax","reducer.argmin","reducer.count","reducer.count.exclude-nulls","reducer.count.include-nulls","reducer.count.nonnull","reducer.join","reducer.join.forbid-nulls","reducer.join.nonnull","reducer.join.urlencoded","reducer.mad","reducer.max","reducer.max.forbid-nulls","reducer.max.nonnull","reducer.mean","reducer.mean.circular","reducer.mean.circular.exclude-nulls","reducer.mean.exclude-nulls","reducer.median","reducer.median.forbid-nulls","reducer.min","reducer.min.forbid-nulls","reducer.min.nonnull","reducer.or","reducer.or.exclude-nulls","reducer.percentile","reducer.percentile.forbid-nulls","reducer.product","reducer.rms","reducer.rms.exclude-nulls","reducer.sd","reducer.sd.forbid-nulls","reducer.sd.welford","reducer.sd.welford.forbid-nulls","reducer.shannonentropy.0","reducer.shannonentropy.1","reducer.sum","reducer.sum.forbid-nulls","reducer.sum.nonnull","reducer.var","reducer.var.forbid-nulls","reducer.var.welford","reducer.var.welford.forbid-nulls"],ie=["BREAK","CHECKMACRO","CONTINUE","CUDF","DEFINED","DEFINEDMACRO","EVAL","FAIL","FOR","FOREACH","FORSTEP","IFT","IFTE","MSGFAIL","NRETURN","RETHROW","RETURN","SWITCH","TRY","UDF","UNTIL","WHILE"],le={keywords:ne,constants:ae,functions:oe,control:ie,operators:["!","!=","%","&","&&","*","**","+","+!","-","/","<","<<","<=","==",">",">=",">>",">>>","AND","NOT","OR","^","|","||","~","~="],escapes:"\\\\(?:[abfnrtv\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})",tokenizer:{root:[["\\@[A-Za-z0-9._\\/]+","variable"],["\\$[A-Za-z0-9._\\/]+","variable"],["true|false","number"],["[A-Za-z_][.\\w$]*",{cases:{"@constants":"regexp","@keywords":"keyword","@functions":"type","@control":"metatag","@default":"identifier"}}],["[{}()[\\]]","@bracket"],["\\d*\\.\\d+([eE][-+]?\\d+)?[fFdD]?","number.float"],["0[xX][0-9a-fA-F_]*[0-9a-fA-F][Ll]?","number.hex"],["0[0-7_]*[0-7][Ll]?","number.octal"],["0[bB][0-1_]*[0-1][Ll]?","number.binary"],["\\d+[lL]?","number"],{include:"@whitespace"},['"([^"\\\\]|\\\\.)*$',"string.invalid"],['"',"string","@string"],["'([^'\\\\]|\\\\.)*$","string.invalid"],["'","string","@string2"],["<'","string","@string3"]],whitespace:[["[ \\t\\r\\n]+","white"],["\\/\\*","comment","@comment"],["\\/\\/.*$","comment"]],comment:[["[^\\/*]+","comment"],["\\/\\*","comment.invalid"],["\\*/","comment","@pop"],["[\\/*]","comment"]],string:[['[^\\"]+',"string"],["@escapes","string.escape"],["\\.","string.escape.invalid"],['"',"string","@pop"]],string2:[["[^\\']+","string"],["@escapes","string.escape"],["\\.","string.escape.invalid"],["'","string","@pop"]],string3:[["[^\\(<')]+","string"],["'>","string","@pop"]]}},ue={brackets:[["(",")"],["{","}"],["[","]"],["'","'"],['"','"'],["<%","%>"]]},ce=(e,t,r,n)=>{0===e.languages.getEncodedLanguageId("Warp10")&&(e.languages.register({id:"Warp10"}),e.languages.registerCompletionItemProvider("Warp10",{provideCompletionItems:(a,o,i,l)=>({suggestions:se(e,t,r,n,o,a)})}),e.languages.setMonarchTokensProvider("Warp10",le),e.languages.setLanguageConfiguration("Warp10",ue),e.editor.defineTheme("grafanaTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#111217"}}))};function se(e,t,r,n,a,o){const i=o.getWordUntilPosition(a),l=[...t.map((t=>({label:t,kind:e.languages.CompletionItemKind.Variable,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],u=[...r.map((t=>({label:t,kind:e.languages.CompletionItemKind.Variable,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],c=[...n.map((t=>({label:t,kind:e.languages.CompletionItemKind.Variable,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],s=[...ne.map((t=>({label:t,kind:e.languages.CompletionItemKind.Keyword,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],E=[...ae.map((t=>({label:t,kind:e.languages.CompletionItemKind.Constant,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],p=[...oe.map((t=>({label:t,kind:e.languages.CompletionItemKind.Function,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))],d=[...ie.map((t=>({label:t,kind:e.languages.CompletionItemKind.Method,insertText:t,range:{startLineNumber:a.lineNumber,startColumn:i.startColumn,endLineNumber:a.lineNumber,endColumn:i.endColumn}})))];let m=[];return m=m.concat(l,u,c,s,E,p,d),m}var Ee=u(980);function pe(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function de(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){pe(o,n,a,i,l,"next",e)}function l(e){pe(o,n,a,i,l,"throw",e)}i(void 0)}))}}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Te extends t.DataSourceWithBackend{applyTemplateVariables(e,t){return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){me(e,t,r[t])}))}return e}({},e),n=null!=(n={queryText:this.computeTimeVars(this.request)+this.computeGrafanaContext()+e.queryText})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r;var r,n}testDatasource(){var e=this,t=()=>super.callHealthCheck;return de((function*(){return"DIRECT"===e.access?e.checkHealth():t().call(e)}))()}checkHealth(){var e=this;return de((function*(){let t="",n="";const a=(0,r.lastValueFrom)(e.doRequest({refId:"",queryText:"1 2 +"}));return yield a.then((e=>{200===e.status?(t="Datasource is working",n="Ok"):(t="An error has occurred",n="Error")})).catch((()=>{t="An error has occurred",n="Error"})),{message:t,details:void 0,status:n}}))()}query(e){return this.request=e,"DIRECT"===this.access?this.queryDirect(e):super.query(e)}queryDirect(e){return console.log("Front"),(0,r.from)(e.targets).pipe((0,r.map)((t=>this.applyTemplateVariables(t,e.scopedVars))),(0,r.mergeMap)((e=>this.doRequest(e))),(0,r.tap)((e=>console.log(e))),(0,r.map)((e=>{let t;return t=(0,Ee.isArray)(e.data[0])?e.data[0].map((e=>this.createDataFrame(e))):[this.createDataFrame(e.data[0])],console.log(t),{data:t}})),(0,r.catchError)(((e,t)=>{throw console.log(e),e})))}createDataFrame(t){return new e.MutableDataFrame({refId:t.l.host||"",fields:[{name:"Time",type:e.FieldType.time,values:t.v.map((e=>e[0]/1e3))},{name:"Value",type:e.FieldType.number||e.FieldType.string,labels:t.l,values:t.v.map((e=>e[e.length-1]))}]})}doRequest(e){return(0,t.getBackendSrv)().fetch({url:this.path+"/api/v0/exec",method:"POST",data:e.queryText,headers:[["Accept","undefined"],["Content-Type","text/plain; charset=UTF-8"]],responseType:"json"})}computeGrafanaContext(){let e="";this.const.forEach((t=>{e+=`'${t.value}' '${t.name}' STORE\n`})),this.macro.forEach((t=>{e+=`${t.value} '${t.name}' STORE\n`}));const r=(0,t.getTemplateSrv)();return this.var.forEach((t=>{const n="${"+t.name+":json}";let a=r.replace(n);if("["===a[0]){let r=JSON.parse(a),n="[ ";r.forEach((e=>{isNaN(+e)?n+="'"+e+"' ":n+=e+" "})),n+="]",e+=`${n} '${t.name}' STORE\n`}else isNaN(+a)?e+=`'${a}' '${t.name}' STORE\n`:e+=`${a} '${t.name}' STORE\n`})),e+="LINEON\n",e}computeTimeVars(e){let t={start:1e3*e.range.from.toDate().getTime(),startISO:e.range.from.toISOString(),end:1e3*e.range.to.toDate().getTime(),endISO:e.range.to.toISOString()};t.interval=t.end-t.start,t.__interval=Math.floor(t.interval/(e.maxDataPoints||1)),t.__interval_ms=Math.floor(t.__interval/1e3);let r="";for(let e in t)r+=`${isNaN(t[e])?`'${t[e]}'`:t[e]} '${e}' STORE `;return r}constructor(e){var r,n,a,o;console.log(e.jsonData),super(e),me(this,"path",void 0),me(this,"access",void 0),me(this,"const",void 0),me(this,"macro",void 0),me(this,"var",void 0),me(this,"request",void 0),this.path=null!==(r=e.jsonData.path)&&void 0!==r?r:"",this.access=null!==(n=e.jsonData.access)&&void 0!==n?n:"DIRECT",this.const=null!==(a=e.jsonData.const)&&void 0!==a?a:[],this.macro=null!==(o=e.jsonData.macro)&&void 0!==o?o:[],this.var=(0,t.getTemplateSrv)().getVariables();const i=this.const.map((e=>"$"+e.name)),l=this.macro.map((e=>"@"+e.name)),u=this.var.map((e=>"$"+e.name));k.init().then((e=>{ce(e,i,l,u)}))}}var Oe=u(388);function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}function Pe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Ce(e){return[...null!=e?e:""].filter((e=>"\n"===e)).length+1}function Re(e){const{listConst:t,deleteConst:r,modifyConst:n}=e;return void 0!==t?V().createElement("table",null,V().createElement("thead",null,V().createElement("tr",null,V().createElement("td",null,V().createElement(Oe.IconButton,{name:"trash-alt",variant:"destructive",tooltip:"Delete",style:{margin:"5px",visibility:"hidden"}})),V().createElement("td",null,V().createElement(Oe.IconButton,{name:"pen",variant:"primary",tooltip:"Edit",style:{margin:"20px",visibility:"hidden"}})),V().createElement("th",{style:{minWidth:"5rem",maxWidth:"15rem",padding:"10px"}},"Name"),V().createElement("th",null,"Value"))),V().createElement("tbody",null,t.map((e=>V().createElement(V().Fragment,null,V().createElement("tr",null,V().createElement("td",null,V().createElement(Oe.IconButton,{name:"trash-alt",variant:"destructive",tooltip:"Delete",style:{margin:"5px"},onClick:()=>r(e.name)})),V().createElement("td",null,V().createElement(Oe.IconButton,{name:"pen",variant:"primary",tooltip:"Edit",style:{margin:"20px"},onClick:()=>n(e.name,e.value)})),V().createElement("td",{style:{minWidth:"5rem",maxWidth:"15rem",overflow:"hidden",textOverflow:"ellipsis",padding:"10px"}},e.name),V().createElement("td",{style:{maxWidth:"80rem",overflow:"hidden",textOverflow:"ellipsis"}},e.value))))))):V().createElement(V().Fragment,null)}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e){return[...null!=e?e:""].filter((e=>"\n"===e)).length+1}const ge=new e.DataSourcePlugin(Te).setConfigEditor((function(e){const{onOptionsChange:t,options:r}=e;let[n,a]=(0,K.useState)(""),[o,i]=(0,K.useState)(""),[l,u]=(0,K.useState)(""),[c,s]=(0,K.useState)(""),[E,p]=(0,K.useState)(20*Ce(c));return k.init().then((e=>{ce(e,[],[],[])})),V().createElement("div",{className:"gf-form-group"},V().createElement("div",null,V().createElement("h1",null,"HTTP Address"),V().createElement(Oe.InlineField,{label:"URL",labelWidth:12,tooltip:"Do not append /api/v0/exec at the end of the URL"},V().createElement(Oe.Input,{onChange:e=>{const n=Pe(fe({},r.jsonData),{path:e.target.value});t(Pe(fe({},r),{jsonData:n}))},width:60,value:r.jsonData.path})),V().createElement(Oe.InlineField,{label:"Access",labelWidth:12,tooltip:"Direct = url is used directly from browser Proxy = Grafana backend will proxy the request"},V().createElement(Oe.Select,{options:[{value:"DIRECT",label:"direct"},{value:"PROXY",label:"proxy"}],onChange:(e,n)=>{const a="DIRECT"===e.value?"DIRECT":"PROXY",o=Pe(fe({},r.jsonData),{access:a});t(Pe(fe({},r),{jsonData:o}))},width:60,id:"select"}))),V().createElement("div",{style:{marginTop:"3rem"}},V().createElement("h1",null,"Constants"),V().createElement(Oe.Card,{style:{borderLeft:"solid 3px  #3498db"}},V().createElement(Oe.Card.Heading,null,"This constants can be used in every templating or query. Register your constant name and value",'and prefix your constant name with "$" in your queries/templating.'),V().createElement(Oe.Card.Description,null,"example: ",V().createElement("code",null,"$token"))),V().createElement("h3",{style:{marginTop:"1rem"}},"Add a constant"),V().createElement(Oe.InlineField,{label:"Name",labelWidth:12},V().createElement(Oe.Input,{width:119,onChange:e=>{a(e.target.value)},value:n})),V().createElement(Oe.InlineField,{label:"Value",labelWidth:12},V().createElement(Oe.TextArea,{cols:100,onChange:e=>{i(e.target.value)},value:o})),V().createElement(Oe.Button,{variant:"primary",style:{marginLeft:"7.15rem"},onClick:()=>{if(""!==n&&""!==o){var e;const l=null!==(e=r.jsonData.const)&&void 0!==e?e:[],u=l.findIndex((e=>e.name===n));if(-1===u){const e={name:n,value:o};l.push(e)}else l[u].value=o;const c=Pe(fe({},r.jsonData),{const:l});t(Pe(fe({},r),{jsonData:c})),a(""),i("")}}},"Add"),V().createElement("h3",{style:{marginTop:"1rem"}},"Constant list"),V().createElement(Re,{listConst:r.jsonData.const,deleteConst:e=>{const n=r.jsonData.const;if(void 0!==n){const a=n.filter((t=>t.name!==e)),o=Pe(fe({},r.jsonData),{const:a});t(Pe(fe({},r),{jsonData:o}))}},modifyConst:(e,t)=>{a(e),i(t)}})),V().createElement("div",{style:{marginTop:"3rem"}},V().createElement("h1",null,"Macros"),V().createElement(Oe.Card,{style:{borderLeft:"solid 3px  #3498db"}},V().createElement(Oe.Card.Heading,null,"This macro can be used in every templating or query. Register your macro name and value",'and prefix your constant name with "@" in your queries/templating.'),V().createElement(Oe.Card.Description,null,"example: ",V().createElement("code",null,"@dropfirst"))),V().createElement("h3",{style:{marginTop:"1rem"}},"Add a macro"),V().createElement(Oe.InlineField,{label:"Name",labelWidth:12},V().createElement(Oe.Input,{width:119,onChange:e=>{u(e.target.value)},value:l})),V().createElement("div",{className:"gf-form",style:{border:"solid 1px #2e3136",width:1052}},V().createElement(re,{height:E,defaultLanguage:"Warp10",theme:"grafanaTheme",defaultValue:"",value:c,onChange:e=>{s(null!=e?e:"");const t=Ce(e);p(t>10?200:20*t)},options:{scrollBeyondLastLine:!1,minimap:{enabled:!1}}})),V().createElement(Oe.Button,{variant:"primary",onClick:()=>{if(""!==l&&""!==c){var e;const n=null!==(e=r.jsonData.macro)&&void 0!==e?e:[],a=n.findIndex((e=>e.name===l));if(-1===a){const e={name:l,value:c};n.push(e)}else n[a].value=c;const o=Pe(fe({},r.jsonData),{macro:n});t(Pe(fe({},r),{jsonData:o})),u(""),s("")}}},"Add"),V().createElement("h3",{style:{marginTop:"1rem"}},"Macros list"),V().createElement(Re,{listConst:r.jsonData.macro,deleteConst:e=>{const n=r.jsonData.macro;if(void 0!==n){const a=n.filter((t=>t.name!==e)),o=Pe(fe({},r.jsonData),{macro:a});t(Pe(fe({},r),{jsonData:o}))}},modifyConst:(e,t)=>{u(e),s(t)}})))})).setQueryEditor((function({query:e,onChange:t,onRunQuery:n}){const{queryText:a}=e;let[o,i]=(0,K.useState)(20*Ae(a)),[l,u]=(0,K.useState)(new r.Subject),[c,s]=(0,K.useState)(l.asObservable().pipe((0,r.tap)((r=>{const n=Ae(r);var a,o;i(n>10?200:20*n),t((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}({},e),o=null!=(o={queryText:null!=r?r:""})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(o)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))})),a))})),(0,r.debounceTime)(2e3)));return(0,K.useEffect)((()=>{let e=c.subscribe((()=>n()));return()=>e.unsubscribe()}),[c,n]),V().createElement("div",{className:"gf-form",style:{border:"solid 1px #2e3136"}},V().createElement(re,{height:o,defaultLanguage:"Warp10",theme:"grafanaTheme",defaultValue:"",value:a,onChange:e=>{l.next(e)},options:{scrollBeyondLastLine:!1,minimap:{enabled:!1}}}))}))})(),c})()));
//# sourceMappingURL=module.js.map